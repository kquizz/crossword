<p style="color: green"><%= notice %></p>

<% content_for :title, "Puzzles" %>

<h1>Puzzles</h1>

<div class="mb-3">
  <%= link_to "New puzzle", new_puzzle_path, class: "btn btn-primary" %>
</div>

<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Dimensions</th>
        <th>Difficulty</th>
        <th>Status</th>
        <th>Created</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @puzzles.each do |puzzle| %>
        <tr>
          <td>
            <strong><%= puzzle.title %></strong>
            <% if puzzle.description.present? %>
              <br><small class="text-muted"><%= truncate(puzzle.description, length: 60) %></small>
            <% end %>
          </td>
          <td>
            <span class="badge bg-info"><%= puzzle.dimensions %></span>
            <br><small class="text-muted"><%= puzzle.playable_squares %> squares</small>
          </td>
          <td>
            <span class="badge <%= puzzle_difficulty_badge_class(puzzle.difficulty) %>">
              <%= puzzle.difficulty&.humanize %>
            </span>
          </td>
          <td>
            <%= puzzle_status_badge(puzzle) %>
          </td>
          <td>
            <%= puzzle.created_at.strftime("%m/%d/%Y") %>
          </td>
          <td>
            <div class="btn-group" role="group">
              <%= link_to "Show", puzzle, class: "btn btn-sm btn-outline-primary" %>
              <%= link_to "Edit", edit_puzzle_path(puzzle), class: "btn btn-sm btn-outline-secondary" %>
              <%= link_to "Delete", puzzle_path(puzzle), method: :delete,
                          class: "btn btn-sm btn-outline-danger",
                          data: {
                            confirm: "Are you sure?",
                            turbo_method: :delete
                          } %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% if @puzzles.empty? %>
  <div class="alert alert-info" role="alert">
    <h4 class="alert-heading">No puzzles found!</h4>
    <p>Start by <%= link_to "creating a new puzzle", new_puzzle_path %>.</p>
  </div>
<% end %>
